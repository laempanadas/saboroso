<div id="gtco-subscribe">
    <div class="gtco-container">
        <div class="row animate-box">
            <div class="col-md-8 col-md-offset-2 text-center gtco-heading">
                <h2 class="cursive-font">Se inscrever</h2>
                <p>Receba as novidades do nosso restaurante</p>
            </div>
        </div>
        <div class="row animate-box">
            <div class="col-md-8 col-md-offset-2">
                <form action="/subscribe" method="post" class="form-inline" id="form-subscribe">
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group">
                            <label for="email" class="sr-only">E-mail</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Seu E-mail">
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <button type="submit" class="btn btn-default btn-block">Inscrever</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById("form-subscribe").addEventListener("submit", function(event) {
        event.preventDefault(); // Evita o envio padrão do formulário
        var form = this;
        var emailInput = form.querySelector("#email");
        var email = emailInput.value;

        fetch("/subscribe", {
            method: "POST",
            body: new URLSearchParams({ email: email }),
            headers: {
                "Content-Type": "application/x-www-form-urlencoded"
            }
        }).then(function(response) {
            if (!response.ok) {
                throw new Error("Erro ao se inscrever.");
            }
            // Se a resposta for bem-sucedida, limpe o campo de e-mail
            emailInput.value = "";
        }).catch(function(error) {
            alert(error.message);
        });
    });
</script>
